
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Festival Route Finder</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(to right, #ffecd2 0%, #fcb69f 100%);
    color: #333;
    margin: 0; padding: 0;
  }
  header {
    background-color: #ff6f61;
    padding: 1em;
    text-align: center;
    color: white;
    font-weight: bold;
    font-size: 1.8em;
    letter-spacing: 2px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  main {
    padding: 20px;
    max-width: 900px;
    margin: 1em auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 6px 15px rgb(0 0 0 / 0.1);
  }
  label {
    font-weight: 600;
    font-size: 1.2em;
  }
  #searchInput {
    width: 100%;
    padding: 10px;
    font-size: 1.1em;
    margin-top: 0.5em;
    border-radius: 8px;
    border: 1px solid #ddd;
    box-sizing: border-box;
  }
  #festivalInfo {
    margin-top: 20px;
  }
  .festival-name {
    font-size: 1.5em;
    font-weight: 700;
    color: #e94e1b;
  }
  .festival-dates {
    font-style: italic;
    margin: 5px 0 12px;
    color: #666;
  }
  .festival-desc {
    margin-bottom: 20px;
    line-height: 1.5;
  }
  #map {
    width: 100%;
    height: 400px;
    border-radius: 10px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  }
  .route-details {
    margin-top: 15px;
    font-weight: 600;
  }
</style>
</head>
<body>
<header>Festival Route Finder in India</header>
<main>
  <label for="searchInput">Search Festival:</label>
  <input type="text" id="searchInput" placeholder="Enter a popular festival name like Diwali, Holi, Dussehra..." />

  <div id="festivalInfo"></div>

  <div id="map"></div>
  <div class="route-details" id="routeDetails"></div>
</main>

<script>
// Sample festival data with key details and GPS coords (latitude, longitude)
const festivals = {
  Diwali: {
    description: "The festival of lights, celebrated by lighting lamps and fireworks, honoring Goddess Laxmi.",
    dates: "October/November 2025: Oct 18–23",
    location: { lat: 26.8467, lng: 80.9462 }, // Example: Lucknow
  },
  Holi: {
    description: "Festival of colors celebrating the arrival of spring with vibrant colored powders.",
    dates: "March 14, 2025",
    location: { lat: 28.7041, lng: 77.1025 }, // Delhi
  },
  Dussehra: {
    description: "Celebrates Lord Rama's victory over demon king Ravana; huge effigies are burned.",
    dates: "October 2, 2025",
    location: { lat: 12.2958, lng: 76.6394 }, // Mysore
  },
  Onam: {
    description: "Kerala harvest festival with boat races, floral decorations, and traditional dances.",
    dates: "September 5, 2025",
    location: { lat: 10.8505, lng: 76.2711 }, // Kerala
  },
  GaneshChaturthi: {
    description: "Ten-day festival celebrating Lord Ganesha with music, dancing and idol immersion ceremonials.",
    dates: "August 26, 2025",
    location: { lat: 19.0760, lng: 72.8777 }, // Mumbai
  }
};

const apiKey = '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';

const searchInput = document.getElementById('searchInput');
const festivalInfo = document.getElementById('festivalInfo');
const routeDetails = document.getElementById('routeDetails');

// Initialize Mapbox (using mapbox api for example) or any routing map service with API key
// To comply with the provided key usage, here a mock function simulates route display.
let map, marker, routeLayer;

function initMap() {
  const defaultLoc = [20.5937, 78.9629]; // Center of India
  map = new L.Map('map').setView(defaultLoc, 5);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '©️ OpenStreetMap contributors'
  }).addTo(map);
}

function clearRoute() {
  if (marker) {
    map.removeLayer(marker);
    marker = null;
  }
  if (routeLayer) {
    map.removeLayer(routeLayer);
    routeLayer = null;
  }
}

// Simulate route display - user location to festival location (demo)
// For real deployment replace with proper routing API integration
function displayRouteToFestival(festivalLocation) {
  clearRoute();
  // User's current location - simulate Delhi
  const userLoc = [28.7041, 77.1025]; // Delhi lat,lng

  marker = L.marker(festivalLocation).addTo(map).bindPopup("Festival Location").openPopup();

  // Draw a simple line to simulate route
  routeLayer = L.polyline([userLoc, festivalLocation], {color: 'blue'}).addTo(map);

  map.fitBounds(routeLayer.getBounds());

  // Calculate distance approx (Haversine formula)
  function toRad(x) { return x * Math.PI / 180; }
  const R = 6371; // km
  const dLat = toRad(festivalLocation[0] - userLoc[0]);
  const dLon = toRad(festivalLocation[1] - userLoc[1]);
  const lat1 = toRad(userLoc[0]);
  const lat2 = toRad(festivalLocation[0]);

  const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  const distance = R * c;

  routeDetails.textContent = `Approximate distance from Delhi to festival: ${distance.toFixed(2)} km`;
}

searchInput.addEventListener('input', () => {
  const val = searchInput.value.toLowerCase().replace(/s+/g, '');
  let found = false;
  festivalInfo.innerHTML = '';
  routeDetails.textContent = '';
  clearRoute();

  for (const key in festivals) {
    if (key.toLowerCase() === val) {
      found = true;
      const fest = festivals[key];
      festivalInfo.innerHTML = `
        <div class="festival-name">${key.replace(/([A-Z])/g, ' $1').trim()}</div>
        <div class="festival-dates">Dates: ${fest.dates}</div>
        <div class="festival-desc">${fest.description}</div>
      `;
      displayRouteToFestival([fest.location.lat, fest.location.lng]);
      break;
    }
  }

  if (!found && val.length > 2) {
    festivalInfo.innerHTML = `<p style="color:red;">Festival not found. Please try Diwali, Holi, Dussehra, Onam or GaneshChaturthi.</p>`;
  }
});

// Initialize map on load
window.onload = () => {
  // Leaflet CSS and JS load for map rendering
  const leafletCss = document.createElement('link');
  leafletCss.rel = 'stylesheet';
  leafletCss.href = 'https://unpkg.com/leaflet/dist/leaflet.css';
  document.head.appendChild(leafletCss);

  const leafletJs = document.createElement('script');
  leafletJs.src = 'https://unpkg.com/leaflet/dist/leaflet.js';
  leafletJs.onload = () => initMap();
  document.body.appendChild(leafletJs);
};
</script>
</body>
</html>